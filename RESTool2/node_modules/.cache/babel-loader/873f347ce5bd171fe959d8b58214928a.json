{"ast":null,"code":"import React,{useEffect}from'react';import InfiniteScroll from'react-infinite-scroll-component';import{dataHelpers}from'../../helpers/data.helpers';import{Button}from'../button/button.comp';import{InfiniteLoader}from'../infiniteLoader/infiniteLoader.comp';import{Pagination}from'../pagination/pagination.comp';import'./table.scss';export var Table=function Table(_ref){var _customLabels$buttons,_customLabels$buttons2,_customLabels$tableCo;var items=_ref.items,fields=_ref.fields,pagination=_ref.pagination,callbacks=_ref.callbacks,customActions=_ref.customActions,customLabels=_ref.customLabels;var editLabel=(customLabels===null||customLabels===void 0?void 0:(_customLabels$buttons=customLabels.buttons)===null||_customLabels$buttons===void 0?void 0:_customLabels$buttons.editItem)||'Edit';var deleteLabel=(customLabels===null||customLabels===void 0?void 0:(_customLabels$buttons2=customLabels.buttons)===null||_customLabels$buttons2===void 0?void 0:_customLabels$buttons2.deleteItem)||'Delete';var actionColumnHeader=(customLabels===null||customLabels===void 0?void 0:(_customLabels$tableCo=customLabels.tableColumnHeaders)===null||_customLabels$tableCo===void 0?void 0:_customLabels$tableCo.actions)||'Actions';var paginationCallbacks={nextPage:callbacks.getNextPage||function(){return;},previousPage:callbacks.getPreviousPage||function(){return;}};function renderTableCell(origField,origItem,value){if(origField.type==='boolean'){value=value?true:false;}if(value&&typeof value==='object'){return'object';}switch(origField.type){case'text':return React.createElement(\"span\",null,value);case'boolean':return React.createElement(\"div\",{className:\"bool \".concat(value?'true':'false')});case'image':return React.createElement(\"img\",{src:value||'',alt:value||origField.label||origField.name});case'url':var url=origField.url||value||'';// Replace all url vars\nfields.forEach(function(field){var fieldValue=dataHelpers.extractDataByDataPath(origItem,field.dataPath,field.name);url=url.replace(\":\".concat(field.name),fieldValue);});return React.createElement(\"a\",{href:url,target:\"_blank\",rel:\"noopener noreferrer\"},origField.urlLabel||value);case'colorbox':return React.createElement(\"div\",{className:\"colorbox\",style:{backgroundColor:value}});default:return value;}}function renderTableRow(item,rowIdx){return React.createElement(\"tr\",{key:\"tr_\".concat(rowIdx)},fields.map(function(field,fieldIdx){var value=dataHelpers.extractDataByDataPath(item,field.dataPath,field.name);return React.createElement(\"td\",{className:field.truncate?'truncate':'',key:\"td_\".concat(rowIdx,\"_\").concat(fieldIdx)},renderTableCell(field,item,value));}),React.createElement(\"td\",null,React.createElement(\"div\",{className:\"actions-wrapper\"},callbacks.put&&React.createElement(Button,{onClick:function onClick(){var _callbacks$put;return(_callbacks$put=callbacks.put)===null||_callbacks$put===void 0?void 0:_callbacks$put.call(callbacks,item);},title:editLabel},React.createElement(\"i\",{className:\"fa fa-pencil-square-o\",\"aria-hidden\":\"true\"})),customActions&&customActions.length>0&&customActions.map(function(action,idx){return React.createElement(Button,{key:\"action_\".concat(rowIdx,\"_\").concat(idx),onClick:function onClick(){return callbacks.action(item,action);},title:action.name},React.createElement(\"i\",{className:\"fa fa-\".concat(action.icon||'cogs'),\"aria-hidden\":\"true\"}));}),callbacks.delete&&React.createElement(Button,{onClick:function onClick(){var _callbacks$delete;return(_callbacks$delete=callbacks.delete)===null||_callbacks$delete===void 0?void 0:_callbacks$delete.call(callbacks,item);},title:deleteLabel},React.createElement(\"i\",{className:\"fa fa-times\",\"aria-hidden\":\"true\"})))));}function renderTableContent(){return React.createElement(\"table\",{className:\"pure-table\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,fields.map(function(field){return React.createElement(\"th\",{key:\"th_\".concat(field.name)},field.label||field.name);}),React.createElement(\"th\",null,actionColumnHeader))),React.createElement(\"tbody\",null,items.map(renderTableRow)));}useEffect(function(){if((pagination===null||pagination===void 0?void 0:pagination.type)==='infinite-scroll'&&document.body.clientHeight<=window.innerHeight&&(pagination===null||pagination===void 0?void 0:pagination.hasNextPage)){paginationCallbacks.nextPage();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);if((pagination===null||pagination===void 0?void 0:pagination.type)==='infinite-scroll'){return React.createElement(InfiniteScroll,{dataLength:items.length,next:callbacks.getNextPage||function(){return null;},hasMore:(pagination===null||pagination===void 0?void 0:pagination.hasNextPage)||false,loader:React.createElement(InfiniteLoader,null)},renderTableContent());}return React.createElement(\"div\",{className:\"table-wrapper\"},renderTableContent(),pagination&&pagination.type==='buttons'&&React.createElement(Pagination,{callbacks:paginationCallbacks,pagination:pagination,customLabels:customLabels}));};","map":{"version":3,"sources":["/Users/claire/Desktop/covid-trend/RESTool2/src/components/table/table.comp.tsx"],"names":["React","useEffect","InfiniteScroll","dataHelpers","Button","InfiniteLoader","Pagination","Table","items","fields","pagination","callbacks","customActions","customLabels","editLabel","buttons","editItem","deleteLabel","deleteItem","actionColumnHeader","tableColumnHeaders","actions","paginationCallbacks","nextPage","getNextPage","previousPage","getPreviousPage","renderTableCell","origField","origItem","value","type","label","name","url","forEach","field","fieldValue","extractDataByDataPath","dataPath","replace","urlLabel","backgroundColor","renderTableRow","item","rowIdx","map","fieldIdx","truncate","put","length","action","idx","icon","delete","renderTableContent","document","body","clientHeight","window","innerHeight","hasNextPage"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\n\nimport { IConfigDisplayField, IConfigCustomAction, ICustomLabels } from '../../common/models/config.model';\nimport { dataHelpers } from '../../helpers/data.helpers';\nimport { Button } from '../button/button.comp';\nimport { InfiniteLoader } from '../infiniteLoader/infiniteLoader.comp';\nimport { IPaginationState } from '../../common/models/states.model';\nimport { Pagination } from '../pagination/pagination.comp';\n\nimport './table.scss';\n\ninterface IProps {\n  items: any[]\n  pagination?: IPaginationState\n  callbacks: {\n    delete: ((item: any) => void) | null\n    put: ((item: any) => void) | null\n    action: (item: any, action: IConfigCustomAction) => void\n    getPreviousPage: (() => void) | null\n    getNextPage: (() => void) | null\n  }\n  fields: IConfigDisplayField[]\n  customActions?: IConfigCustomAction[]\n  customLabels?: ICustomLabels\n}\n\nexport const Table = ({ items, fields, pagination, callbacks, customActions, customLabels }: IProps) => {\n  const editLabel = customLabels?.buttons?.editItem || 'Edit';\n  const deleteLabel = customLabels?.buttons?.deleteItem || 'Delete';\n  const actionColumnHeader = customLabels?.tableColumnHeaders?.actions || 'Actions';\n  const paginationCallbacks = {\n    nextPage: callbacks.getNextPage || (() => { return; }),\n    previousPage: callbacks.getPreviousPage || (() => { return; }),\n  };\n\n  function renderTableCell(origField: IConfigDisplayField, origItem: any, value: any) {\n    if (origField.type === 'boolean') {\n      value = value ? true : false;\n    }\n\n    if (value && typeof value === 'object') {\n      return 'object';\n    }\n\n    switch (origField.type) {\n      case 'text':\n        return <span>{value}</span>;\n      case 'boolean':\n        return <div className={`bool ${value ? 'true' : 'false'}`}></div>;\n      case 'image':\n        return <img src={value || ''} alt={value || origField.label || origField.name} />;\n      case 'url':\n        let url: string = origField.url || value || '';\n\n        // Replace all url vars\n        fields.forEach((field) => {\n          const fieldValue = dataHelpers.extractDataByDataPath(origItem, field.dataPath, field.name);\n          url = url.replace(`:${field.name}`, fieldValue);\n        });\n\n        return <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{origField.urlLabel || value}</a>;\n      case 'colorbox':\n        return <div className=\"colorbox\" style={{ backgroundColor: value }}></div>;\n      default:\n        return value;\n    }\n  }\n\n  function renderTableRow(item: any, rowIdx: number) {\n    return (\n      <tr key={`tr_${rowIdx}`}>\n        {\n          fields.map((field, fieldIdx) => {\n            const value = dataHelpers.extractDataByDataPath(item, field.dataPath, field.name);\n            return (\n              <td className={field.truncate ? 'truncate' : ''} key={`td_${rowIdx}_${fieldIdx}`}>\n                {renderTableCell(field, item, value)}\n              </td>\n            );\n          })\n        }\n        <td>\n          <div className=\"actions-wrapper\">\n            {\n              callbacks.put &&\n              <Button onClick={() => callbacks.put?.(item)} title={editLabel}>\n                <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>\n              </Button>\n            }\n            {\n              (customActions && customActions.length > 0) &&\n              customActions.map((action, idx) => (\n                <Button key={`action_${rowIdx}_${idx}`} onClick={() => callbacks.action(item, action)} title={action.name}>\n                  <i className={`fa fa-${action.icon || 'cogs'}`} aria-hidden=\"true\"></i>\n                </Button>\n              ))\n            }\n            {\n              callbacks.delete &&\n              <Button onClick={() => callbacks.delete?.(item)} title={deleteLabel}>\n                <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\n              </Button>\n            }\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  function renderTableContent() {\n    return (\n      <table className=\"pure-table\">\n        <thead>\n          <tr>\n            {\n              fields.map((field) => {\n                return <th key={`th_${field.name}`}>{field.label || field.name}</th>;\n              })\n            }\n            <th>{actionColumnHeader}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {\n            items.map(renderTableRow)\n          }\n        </tbody>\n      </table>\n    );\n  }\n\n  useEffect(() => {\n    if (\n      pagination?.type === 'infinite-scroll'\n      && document.body.clientHeight <= window.innerHeight\n      && pagination?.hasNextPage\n    ) {\n      paginationCallbacks.nextPage();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (pagination?.type === 'infinite-scroll') {\n    return (\n      <InfiniteScroll\n        dataLength={items.length}\n        next={callbacks.getNextPage || (() => null)}\n        hasMore={pagination?.hasNextPage || false}\n        loader={<InfiniteLoader />}\n      >\n        {renderTableContent()}\n      </InfiniteScroll>\n    );\n  }\n\n  return (\n    <div className=\"table-wrapper\">\n      {renderTableContent()}\n      {\n        pagination &&\n        pagination.type === 'buttons' &&\n        <Pagination\n          callbacks={paginationCallbacks}\n          pagination={pagination}\n          customLabels={customLabels}\n        ></Pagination>\n      }\n    </div >\n  );\n}\n"]},"metadata":{},"sourceType":"module"}